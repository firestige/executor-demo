<?xml version="1.0" encoding="UTF-8"?>
<project version="4">
  <component name="CopilotDiffPersistence">
    <option name="pendingDiffs">
      <map>
        <entry key="$PROJECT_DIR$/src/test/java/xyz/firestige/executor/unit/exception/FailureInfoTest.java">
          <value>
            <PendingDiffInfo>
              <option name="filePath" value="$PROJECT_DIR$/src/test/java/xyz/firestige/executor/unit/exception/FailureInfoTest.java" />
              <option name="originalContent" value="&#10;" />
              <option name="updatedContent" value="package xyz.firestige.executor.unit.exception;&#10;&#10;import org.junit.jupiter.api.DisplayName;&#10;import org.junit.jupiter.api.Tag;&#10;import org.junit.jupiter.api.Test;&#10;import org.junit.jupiter.api.extension.ExtendWith;&#10;import xyz.firestige.executor.exception.ErrorType;&#10;import xyz.firestige.executor.exception.FailureInfo;&#10;import xyz.firestige.executor.util.TimingExtension;&#10;&#10;import static org.junit.jupiter.api.Assertions.*;&#10;&#10;/**&#10; * FailureInfo 单元测试&#10; * 测试失败信息封装类&#10; */&#10;@Tag(&quot;unit&quot;)&#10;@Tag(&quot;fast&quot;)&#10;@ExtendWith(TimingExtension.class)&#10;@DisplayName(&quot;FailureInfo 单元测试&quot;)&#10;class FailureInfoTest {&#10;&#10;    @Test&#10;    @DisplayName(&quot;场景: 创建基本失败信息&quot;)&#10;    void testCreateBasicFailureInfo() {&#10;        // When: 创建失败信息&#10;        FailureInfo info = FailureInfo.of(ErrorType.SYSTEM_ERROR, &quot;系统错误&quot;);&#10;        &#10;        // Then: 属性正确&#10;        assertNotNull(info);&#10;        assertEquals(ErrorType.SYSTEM_ERROR, info.getErrorType());&#10;        assertEquals(&quot;系统错误&quot;, info.getErrorMessage());&#10;    }&#10;    &#10;    @Test&#10;    @DisplayName(&quot;场景: 不同错误类型&quot;)&#10;    void testDifferentErrorTypes() {&#10;        // When: 创建不同类型的失败信息&#10;        FailureInfo validation = FailureInfo.of(ErrorType.VALIDATION_ERROR, &quot;校验失败&quot;);&#10;        FailureInfo timeout = FailureInfo.of(ErrorType.TIMEOUT_ERROR, &quot;超时&quot;);&#10;        FailureInfo business = FailureInfo.of(ErrorType.BUSINESS_ERROR, &quot;业务错误&quot;);&#10;        &#10;        // Then: 类型正确&#10;        assertEquals(ErrorType.VALIDATION_ERROR, validation.getErrorType());&#10;        assertEquals(ErrorType.TIMEOUT_ERROR, timeout.getErrorType());&#10;        assertEquals(ErrorType.BUSINESS_ERROR, business.getErrorType());&#10;    }&#10;}&#10;&#10;" />
            </PendingDiffInfo>
          </value>
        </entry>
        <entry key="$PROJECT_DIR$/src/test/java/xyz/firestige/executor/unit/validation/ValidationMessageTest.java">
          <value>
            <PendingDiffInfo>
              <option name="filePath" value="$PROJECT_DIR$/src/test/java/xyz/firestige/executor/unit/validation/ValidationMessageTest.java" />
              <option name="updatedContent" value="package xyz.firestige.executor.unit.validation;&#10;&#10;import org.junit.jupiter.api.DisplayName;&#10;import org.junit.jupiter.api.Tag;&#10;import org.junit.jupiter.api.Test;&#10;import org.junit.jupiter.api.extension.ExtendWith;&#10;import xyz.firestige.executor.util.TimingExtension;&#10;import xyz.firestige.executor.validation.ValidationError;&#10;import xyz.firestige.executor.validation.ValidationWarning;&#10;&#10;import static org.junit.jupiter.api.Assertions.*;&#10;&#10;/**&#10; * ValidationError 和 ValidationWarning 单元测试&#10; * 测试校验消息对象&#10; */&#10;@Tag(&quot;unit&quot;)&#10;@Tag(&quot;fast&quot;)&#10;@ExtendWith(TimingExtension.class)&#10;@DisplayName(&quot;ValidationError/Warning 单元测试&quot;)&#10;class ValidationMessageTest {&#10;    &#10;    @Test&#10;    @DisplayName(&quot;场景: 创建校验错误&quot;)&#10;    void testCreateValidationError() {&#10;        // When: 创建错误&#10;        ValidationError error = ValidationError.of(&quot;field1&quot;, &quot;字段不能为空&quot;);&#10;        &#10;        // Then: 属性正确&#10;        assertNotNull(error);&#10;        assertEquals(&quot;field1&quot;, error.getField());&#10;        assertEquals(&quot;字段不能为空&quot;, error.getMessage());&#10;    }&#10;    &#10;    @Test&#10;    @DisplayName(&quot;场景: 创建带值的校验错误&quot;)&#10;    void testCreateValidationErrorWithValue() {&#10;        // When: 创建带值的错误&#10;        ValidationError error = ValidationError.of(&quot;age&quot;, &quot;年龄超出范围&quot;, &quot;150&quot;);&#10;        &#10;        // Then: 包含值信息&#10;        assertEquals(&quot;age&quot;, error.getField());&#10;        assertEquals(&quot;年龄超出范围&quot;, error.getMessage());&#10;        assertEquals(&quot;150&quot;, error.getRejectedValue());&#10;    }&#10;    &#10;    @Test&#10;    @DisplayName(&quot;场景: 创建校验警告&quot;)&#10;    void testCreateValidationWarning() {&#10;        // When: 创建警告&#10;        ValidationWarning warning = ValidationWarning.of(&quot;field2&quot;, &quot;建议填写完整信息&quot;);&#10;        &#10;        // Then: 属性正确&#10;        assertNotNull(warning);&#10;        assertEquals(&quot;field2&quot;, warning.getField());&#10;        assertEquals(&quot;建议填写完整信息&quot;, warning.getMessage());&#10;    }&#10;    &#10;    @Test&#10;    @DisplayName(&quot;场景: 错误和警告的区别&quot;)&#10;    void testErrorVsWarning() {&#10;        // Given: 错误和警告&#10;        ValidationError error = ValidationError.of(&quot;field&quot;, &quot;错误&quot;);&#10;        ValidationWarning warning = ValidationWarning.of(&quot;field&quot;, &quot;警告&quot;);&#10;        &#10;        // Then: 是不同的类型&#10;        assertNotEquals(error.getClass(), warning.getClass());&#10;        assertTrue(error instanceof ValidationError);&#10;        assertTrue(warning instanceof ValidationWarning);&#10;    }&#10;}&#10;" />
            </PendingDiffInfo>
          </value>
        </entry>
        <entry key="$PROJECT_DIR$/src/test/java/xyz/firestige/executor/unit/validation/ValidationSummaryTest.java">
          <value>
            <PendingDiffInfo>
              <option name="filePath" value="$PROJECT_DIR$/src/test/java/xyz/firestige/executor/unit/validation/ValidationSummaryTest.java" />
              <option name="updatedContent" value="package xyz.firestige.executor.unit.validation;&#10;&#10;import org.junit.jupiter.api.DisplayName;&#10;import org.junit.jupiter.api.Tag;&#10;import org.junit.jupiter.api.Test;&#10;import org.junit.jupiter.api.extension.ExtendWith;&#10;import xyz.firestige.dto.TenantDeployConfig;&#10;import xyz.firestige.executor.util.TestDataFactory;&#10;import xyz.firestige.executor.util.TimingExtension;&#10;import xyz.firestige.executor.validation.ValidationError;&#10;import xyz.firestige.executor.validation.ValidationSummary;&#10;&#10;import java.util.List;&#10;&#10;import static org.junit.jupiter.api.Assertions.*;&#10;&#10;/**&#10; * ValidationSummary 单元测试&#10; * 测试校验摘要功能&#10; */&#10;@Tag(&quot;unit&quot;)&#10;@Tag(&quot;fast&quot;)&#10;@ExtendWith(TimingExtension.class)&#10;@DisplayName(&quot;ValidationSummary 单元测试&quot;)&#10;class ValidationSummaryTest {&#10;    &#10;    @Test&#10;    @DisplayName(&quot;场景: 空摘要&quot;)&#10;    void testEmptySummary() {&#10;        // When: 创建空摘要&#10;        ValidationSummary summary = new ValidationSummary();&#10;        &#10;        // Then: 统计正确&#10;        assertEquals(0, summary.getValidCount());&#10;        assertEquals(0, summary.getInvalidCount());&#10;        assertFalse(summary.hasErrors());&#10;    }&#10;    &#10;    @Test&#10;    @DisplayName(&quot;场景: 添加有效配置&quot;)&#10;    void testAddValidConfig() {&#10;        // Given: 摘要&#10;        ValidationSummary summary = new ValidationSummary();&#10;        TenantDeployConfig config = TestDataFactory.createMinimalConfig(&quot;tenant1&quot;, 1001L);&#10;        &#10;        // When: 添加有效配置&#10;        summary.addValidConfig(config);&#10;        summary.addValidConfig(TestDataFactory.createMinimalConfig(&quot;tenant2&quot;, 1001L));&#10;        summary.setTotalConfigs(2);&#10;        &#10;        // Then: 统计正确&#10;        assertEquals(2, summary.getValidCount());&#10;        assertEquals(0, summary.getInvalidCount());&#10;        assertEquals(2, summary.getTotalConfigs());&#10;        assertFalse(summary.hasErrors());&#10;    }&#10;    &#10;    @Test&#10;    @DisplayName(&quot;场景: 添加无效配置&quot;)&#10;    void testAddInvalidConfig() {&#10;        // Given: 摘要和错误&#10;        ValidationSummary summary = new ValidationSummary();&#10;        TenantDeployConfig config = TestDataFactory.createMinimalConfig(&quot;tenant1&quot;, 1001L);&#10;        List&lt;ValidationError&gt; errors = List.of(&#10;            ValidationError.of(&quot;field1&quot;, &quot;错误1&quot;),&#10;            ValidationError.of(&quot;field2&quot;, &quot;错误2&quot;)&#10;        );&#10;        &#10;        // When: 添加无效配置&#10;        summary.addInvalidConfig(config, errors);&#10;        summary.setTotalConfigs(1);&#10;        &#10;        // Then: 统计正确&#10;        assertEquals(0, summary.getValidCount());&#10;        assertEquals(1, summary.getInvalidCount());&#10;        assertTrue(summary.hasErrors());&#10;        assertEquals(2, summary.getAllErrors().size());&#10;    }&#10;    &#10;    @Test&#10;    @DisplayName(&quot;场景: 混合有效和无效配置&quot;)&#10;    void testMixedConfigs() {&#10;        // Given: 摘要&#10;        ValidationSummary summary = new ValidationSummary();&#10;        &#10;        // When: 添加混合配置&#10;        summary.addValidConfig(TestDataFactory.createMinimalConfig(&quot;tenant1&quot;, 1001L));&#10;        summary.addValidConfig(TestDataFactory.createMinimalConfig(&quot;tenant2&quot;, 1001L));&#10;        &#10;        TenantDeployConfig invalid = TestDataFactory.createMinimalConfig(&quot;tenant3&quot;, 1001L);&#10;        summary.addInvalidConfig(invalid, List.of(ValidationError.of(&quot;field&quot;, &quot;错误&quot;)));&#10;        &#10;        summary.setTotalConfigs(3);&#10;        &#10;        // Then: 统计正确&#10;        assertEquals(3, summary.getTotalConfigs());&#10;        assertEquals(2, summary.getValidCount());&#10;        assertEquals(1, summary.getInvalidCount());&#10;        assertTrue(summary.hasErrors());&#10;    }&#10;    &#10;    @Test&#10;    @DisplayName(&quot;场景: 获取所有错误&quot;)&#10;    void testGetAllErrors() {&#10;        // Given: 摘要和多个无效配置&#10;        ValidationSummary summary = new ValidationSummary();&#10;        &#10;        TenantDeployConfig config1 = TestDataFactory.createMinimalConfig(&quot;tenant1&quot;, 1001L);&#10;        summary.addInvalidConfig(config1, List.of(&#10;            ValidationError.of(&quot;field1&quot;, &quot;错误1&quot;),&#10;            ValidationError.of(&quot;field2&quot;, &quot;错误2&quot;)&#10;        ));&#10;        &#10;        TenantDeployConfig config2 = TestDataFactory.createMinimalConfig(&quot;tenant2&quot;, 1001L);&#10;        summary.addInvalidConfig(config2, List.of(&#10;            ValidationError.of(&quot;field3&quot;, &quot;错误3&quot;)&#10;        ));&#10;        &#10;        // When: 获取所有错误&#10;        List&lt;ValidationError&gt; allErrors = summary.getAllErrors();&#10;        &#10;        // Then: 包含所有错误&#10;        assertEquals(3, allErrors.size());&#10;    }&#10;}&#10;" />
            </PendingDiffInfo>
          </value>
        </entry>
      </map>
    </option>
  </component>
</project>