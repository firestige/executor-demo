<?xml version="1.0" encoding="UTF-8"?>
<project version="4">
  <component name="AutoImportSettings">
    <option name="autoReloadType" value="SELECTIVE" />
  </component>
  <component name="ChangeListManager">
    <list default="true" id="96f17203-e054-42f3-9e7e-885e9cc629cb" name="Changes" comment="docs: 重构文档维护逻辑">
      <change afterPath="$PROJECT_DIR$/src/main/java/xyz/firestige/executor/application/dto/TenantConfig.java" afterDir="false" />
      <change beforePath="$PROJECT_DIR$/RF01_DESIGN_DECISIONS.md" beforeDir="false" afterPath="$PROJECT_DIR$/RF01_DESIGN_DECISIONS.md" afterDir="false" />
      <change beforePath="$PROJECT_DIR$/RF01_FINAL_SUMMARY.md" beforeDir="false" afterPath="$PROJECT_DIR$/RF01_FINAL_SUMMARY.md" afterDir="false" />
      <change beforePath="$PROJECT_DIR$/RF01_PHASE6_ARCHIVE_GUIDE.md" beforeDir="false" afterPath="$PROJECT_DIR$/RF01_PHASE6_ARCHIVE_GUIDE.md" afterDir="false" />
      <change beforePath="$PROJECT_DIR$/RF01_README.md" beforeDir="false" afterPath="$PROJECT_DIR$/RF01_README.md" afterDir="false" />
      <change beforePath="$PROJECT_DIR$/RF01_REFACTOR_PROPOSAL.md" beforeDir="false" afterPath="$PROJECT_DIR$/RF01_REFACTOR_PROPOSAL.md" afterDir="false" />
      <change beforePath="$PROJECT_DIR$/RF01_RESULT_DTO_ANALYSIS.md" beforeDir="false" afterPath="$PROJECT_DIR$/RF01_RESULT_DTO_ANALYSIS.md" afterDir="false" />
    </list>
    <option name="SHOW_DIALOG" value="false" />
    <option name="HIGHLIGHT_CONFLICTS" value="true" />
    <option name="HIGHLIGHT_NON_ACTIVE_CHANGELIST" value="false" />
    <option name="LAST_RESOLUTION" value="IGNORE" />
  </component>
  <component name="FileTemplateManagerImpl">
    <option name="RECENT_TEMPLATES">
      <list>
        <option value="Enum" />
        <option value="Class" />
      </list>
    </option>
  </component>
  <component name="Git.Settings">
    <option name="RECENT_GIT_ROOT_PATH" value="$PROJECT_DIR$" />
  </component>
  <component name="GitHubPullRequestSearchHistory">{
  &quot;lastFilter&quot;: {
    &quot;state&quot;: &quot;OPEN&quot;,
    &quot;assignee&quot;: &quot;firestige&quot;
  }
}</component>
  <component name="GithubPullRequestsUISettings">{
  &quot;selectedUrlAndAccountId&quot;: {
    &quot;url&quot;: &quot;https://github.com/firestige/executor-demo.git&quot;,
    &quot;accountId&quot;: &quot;c9e1ee2e-608d-4cda-8ce6-564bc1c1eb07&quot;
  }
}</component>
  <component name="HighlightingSettingsPerFile">
    <setting file="file://$PROJECT_DIR$/README.md" root0="FORCE_HIGHLIGHTING" root1="SKIP_HIGHLIGHTING" />
  </component>
  <component name="ProjectCodeStyleSettingsMigration">
    <option name="version" value="2" />
  </component>
  <component name="ProjectColorInfo">{
  &quot;associatedIndex&quot;: 7
}</component>
  <component name="ProjectId" id="35N4Y79eS1T1jDupFiZmvQYqUXx" />
  <component name="ProjectLevelVcsManager">
    <ConfirmationsSetting value="2" id="Add" />
  </component>
  <component name="ProjectViewState">
    <option name="hideEmptyMiddlePackages" value="true" />
    <option name="showLibraryContents" value="true" />
  </component>
  <component name="PropertiesComponent">{
  &quot;keyToString&quot;: {
    &quot;Maven.executor-demo [test].executor&quot;: &quot;Run&quot;,
    &quot;ModuleVcsDetector.initialDetectionPerformed&quot;: &quot;true&quot;,
    &quot;RunOnceActivity.ShowReadmeOnStart&quot;: &quot;true&quot;,
    &quot;RunOnceActivity.TerminalTabsStorage.copyFrom.TerminalArrangementManager.252&quot;: &quot;true&quot;,
    &quot;RunOnceActivity.git.unshallow&quot;: &quot;true&quot;,
    &quot;dart.analysis.tool.window.visible&quot;: &quot;false&quot;,
    &quot;extract.method.default.visibility&quot;: &quot;private&quot;,
    &quot;git-widget-placeholder&quot;: &quot;feature/new-arch-purge&quot;,
    &quot;kotlin-language-version-configured&quot;: &quot;true&quot;,
    &quot;node.js.detected.package.eslint&quot;: &quot;true&quot;,
    &quot;node.js.detected.package.tslint&quot;: &quot;true&quot;,
    &quot;node.js.selected.package.eslint&quot;: &quot;(autodetect)&quot;,
    &quot;node.js.selected.package.tslint&quot;: &quot;(autodetect)&quot;,
    &quot;nodejs_package_manager_path&quot;: &quot;npm&quot;,
    &quot;project.structure.last.edited&quot;: &quot;Project&quot;,
    &quot;project.structure.proportion&quot;: &quot;0.0&quot;,
    &quot;project.structure.side.proportion&quot;: &quot;0.0&quot;,
    &quot;settings.editor.selected.configurable&quot;: &quot;MavenSettings&quot;,
    &quot;show.migrate.to.gradle.popup&quot;: &quot;false&quot;,
    &quot;vue.rearranger.settings.migration&quot;: &quot;true&quot;
  }
}</component>
  <component name="RecentsManager">
    <key name="CreateClassDialog.RecentsKey">
      <recent name="xyz.firestige.dto" />
      <recent name="xyz.firestige.executor" />
    </key>
  </component>
  <component name="SharedIndexes">
    <attachedChunks>
      <set>
        <option value="bundled-jdk-9823dce3aa75-bf35d07a577b-intellij.indexing.shared.core-IU-252.27397.103" />
        <option value="bundled-js-predefined-d6986cc7102b-3aa1da707db6-JavaScript-IU-252.27397.103" />
      </set>
    </attachedChunks>
  </component>
  <component name="TaskManager">
    <task active="true" id="Default" summary="Default task">
      <changelist id="96f17203-e054-42f3-9e7e-885e9cc629cb" name="Changes" comment="" />
      <created>1762937243439</created>
      <option name="number" value="Default" />
      <option name="presentableId" value="Default" />
      <updated>1762937243439</updated>
      <workItem from="1762937245519" duration="7341000" />
      <workItem from="1763004230729" duration="21000" />
      <workItem from="1763027714496" duration="101625000" />
      <workItem from="1763337329916" duration="1299000" />
      <workItem from="1763341914384" duration="310000" />
      <workItem from="1763342276002" duration="1680000" />
      <workItem from="1763343986508" duration="44000" />
      <workItem from="1763344041414" duration="186000" />
      <workItem from="1763344229146" duration="3850000" />
    </task>
    <task id="LOCAL-00001" summary="回退初始状态">
      <option name="closed" value="true" />
      <created>1763107068206</created>
      <option name="number" value="00001" />
      <option name="presentableId" value="LOCAL-00001" />
      <option name="project" value="LOCAL" />
      <updated>1763107068206</updated>
    </task>
    <task id="LOCAL-00002" summary="feat: 完成 Phase 3 状态管理层&#10;&#10;- 创建 StateTransition 和 StateTransitionResult 状态转移记录和结果类&#10;- 实现 TaskStateMachine 状态机，定义完整的状态转移规则&#10;  * 支持 14 种任务状态的合法转移&#10;  * 提供状态转移历史记录&#10;  * 支持状态转移验证&#10;- 创建完整的事件体系（15 个事件类）&#10;  * TaskStatusEvent 事件基类&#10;  * 任务生命周期事件：Created, Validated, Started, Completed, Failed&#10;  * 校验相关事件：ValidationFailed&#10;  * 执行进度事件：Progress, StageCompleted, StageFailed&#10;  * 控制操作事件：Paused, Resumed&#10;  * 回滚相关事件：RollingBack, RollbackFailed, RolledBack&#10;- 实现 TaskStateManager 状态管理器&#10;  * 管理任务状态机的生命周期&#10;  * 集成 Spring ApplicationEventPublisher&#10;  * 在状态转移时自动发布对应事件&#10;  * 提供丰富的事件发布 API&#10;- 更新 TODO.md，标记 Phase 3 完成&#10;- 清理不必要的 IDE 配置文件&#10;&#10;所有状态转移受状态机保护，事件发布完整，编译通过。">
      <option name="closed" value="true" />
      <created>1763109402016</created>
      <option name="number" value="00002" />
      <option name="presentableId" value="LOCAL-00002" />
      <option name="project" value="LOCAL" />
      <updated>1763109402016</updated>
    </task>
    <task id="LOCAL-00003" summary="feat: 完成 Phase 4 执行层 Pipeline 机制&#10;&#10;- 创建 PipelineContext 上下文类&#10;  * 支持租户配置和任务 ID 的传递&#10;  * 提供累积数据存储，支持 Stage 间数据传递&#10;  * 支持暂停和取消标志控制&#10;  * 类型安全的数据获取方法&#10;- 创建 PipelineStage 接口&#10;  * 定义 execute 和 rollback 方法&#10;  * 支持执行顺序控制（order）&#10;  * 支持跳过和回滚能力声明&#10;- 实现 Pipeline 管道类&#10;  * 按顺序执行多个 Stage&#10;  * 支持暂停、取消和跳过逻辑&#10;  * 集成检查点自动保存&#10;  * 支持从检查点恢复执行&#10;  * 支持逆序回滚已执行的 Stage&#10;  * 完整的异常处理和日志记录&#10;- 创建检查点管理机制&#10;  * CheckpointManager 接口定义&#10;  * InMemoryCheckpointManager 内存实现&#10;  * 支持检查点的保存、加载和清除&#10;- 实现 TenantTaskExecutor 租户任务执行器&#10;  * 集成 Pipeline 和状态管理&#10;  * 支持执行、暂停、恢复、回滚操作&#10;  * 支持重试（从头或从检查点）&#10;  * 自动发布任务状态事件&#10;  * 完整的生命周期管理&#10;- 更新 TODO.md，标记 Phase 4 完成">
      <option name="closed" value="true" />
      <created>1763109799036</created>
      <option name="number" value="00003" />
      <option name="presentableId" value="LOCAL-00003" />
      <option name="project" value="LOCAL" />
      <updated>1763109799037</updated>
    </task>
    <task id="LOCAL-00004" summary="feat: 完成 Phase 5 服务通知层&#10;&#10;- 创建 NotificationResult 通知结果类&#10;  * 封装服务通知的执行结果&#10;  * 支持成功和失败两种状态&#10;  * 包含失败信息和响应数据&#10;- 创建 ServiceNotificationStrategy 策略接口&#10;  * 定义 notify 和 rollback 方法&#10;  * 支持配置验证&#10;  * 支持回滚能力声明&#10;- 实现 ServiceRegistry 服务注册中心&#10;  * 管理所有服务通知策略&#10;  * 支持策略的注册、查找和移除&#10;  * 线程安全（ConcurrentHashMap）&#10;- 实现 DirectRpcNotificationStrategy 直接 RPC 策略（Mock）&#10;  * 模拟直接通过 RPC 调用服务&#10;  * 支持配置验证&#10;  * 支持回滚操作&#10;  * 完整的日志记录&#10;- 实现 RedisRpcNotificationStrategy Redis+RPC 组合策略（Mock）&#10;  * 模拟先写 Redis 再通知服务的流程&#10;  * 两步操作：Redis 写入 + RPC 通知&#10;  * 支持完整回滚（删除 Redis + RPC 回滚）&#10;  * 包含配置序列化逻辑&#10;- 创建 ServiceNotificationAdapter 适配器基类&#10;  * 支持聚合多个子策略&#10;  * 顺序执行子策略&#10;  * 逆序回滚子策略&#10;  * 提供策略组合能力&#10;- 实现 ServiceNotificationStage Stage 适配&#10;  * 将 Strategy 适配为 PipelineStage&#10;  * 集成配置验证&#10;  * 集成通知执行和回滚&#10;  * 支持跳过逻辑&#10;  * 完整的异常处理&#10;- 更新 TODO.md，标记 Phase 5 完成">
      <option name="closed" value="true" />
      <created>1763110095194</created>
      <option name="number" value="00004" />
      <option name="presentableId" value="LOCAL-00004" />
      <option name="project" value="LOCAL" />
      <updated>1763110095194</updated>
    </task>
    <task id="LOCAL-00005" summary="feat: 完成 Phase 6 编排层&#10;&#10;- 创建 ExecutionUnit 执行单类&#10;  * 封装一组租户任务的配置&#10;  * 支持 CONCURRENT 和 FIFO 两种执行模式&#10;  * 管理执行单的生命周期状态&#10;  * 提供租户查找和统计功能&#10;  * 状态标记方法（scheduled, running, completed, failed 等）&#10;- 实现 ExecutionUnitScheduler 调度器&#10;  * 配置线程池支持并发执行&#10;  * 实现并发执行模式（多个租户任务同时执行）&#10;  * 实现 FIFO 执行模式（租户任务依次执行）&#10;  * 集成 PipelineFactory 创建 Pipeline&#10;  * 集成 TaskStateManager 管理任务状态&#10;  * 完整的异常处理和结果收集&#10;  * 优雅关闭机制&#10;- 实现 TaskOrchestrator 任务编排器&#10;  * 管理所有执行单的生命周期&#10;  * 提交执行单并自动调度&#10;  * 租户冲突检测（同一租户不能重复执行）&#10;  * 支持按 tenantId 查找和控制任务&#10;  * 支持按 planId 查找和控制任务&#10;  * 实现暂停操作（pauseByTenant, pauseByPlan）&#10;  * 实现恢复操作（resumeByTenant, resumeByPlan）&#10;  * 实现回滚操作（rollbackByTenant, rollbackByPlan）&#10;  * 实现重试操作（retryByTenant, retryByPlan）&#10;  * 维护多种映射关系（租户-执行单、计划-执行单）&#10;  * 注册和管理租户任务执行器&#10;  * 清理已完成的执行单&#10;- 更新 TODO.md，标记 Phase 6 完成">
      <option name="closed" value="true" />
      <created>1763110364698</created>
      <option name="number" value="00005" />
      <option name="presentableId" value="LOCAL-00005" />
      <option name="project" value="LOCAL" />
      <updated>1763110364698</updated>
    </task>
    <task id="LOCAL-00006" summary="feat: 完成 Phase 7 Facade 层和 Spring 配置 - 核心功能全部完成&#10;&#10;- 创建 DeploymentTaskFacade 对外接口&#10;  * 定义统一的蓝绿发布配置下发 API&#10;  * 支持按租户 ID 和计划 ID 两种粒度的操作&#10;  * 方法：createSwitchTask, pause, resume, rollback, retry, query, cancel&#10;- 实现 DeploymentTaskFacadeImpl 核心逻辑&#10;  * 集成 ValidationChain 进行前置校验&#10;  * 集成 TaskOrchestrator 管理任务生命周期&#10;  * 集成 TaskStateManager 发布状态事件&#10;  * 完整的任务创建流程：&#10;    1. 校验配置（ValidationChain）&#10;    2. 发布创建和校验事件&#10;    3. 按 planId 分组创建执行单&#10;    4. 提交到 TaskOrchestrator 调度执行&#10;  * 操作方法支持：&#10;    - pauseTaskByTenant / pauseTaskByPlan&#10;    - resumeTaskByTenant / resumeTaskByPlan&#10;    - rollbackTaskByTenant / rollbackTaskByPlan&#10;    - retryTaskByTenant / retryTaskByPlan（支持从检查点）&#10;  * 查询方法：queryTaskStatus, queryTaskStatusByTenant&#10;  * 完整的异常处理和结果封装&#10;- 创建 ExecutorConfiguration Spring 配置类&#10;  * 配置 CheckpointManager（InMemory 实现）&#10;  * 配置 TaskStateManager（集成 ApplicationEventPublisher）&#10;  * 配置 ServiceRegistry（预注册 4 个示例服务）&#10;  * 配置 PipelineFactory（动态创建 Pipeline 和 Stage）&#10;  * 配置 ExecutionUnitScheduler（线程池配置）&#10;  * 配置 TaskOrchestrator（任务编排）&#10;  * 配置 ValidationChain（4 个校验器）&#10;  * 配置 DeploymentTaskFacade（完整依赖注入）&#10;- 更新 TODO.md，标记核心功能全部完成">
      <option name="closed" value="true" />
      <created>1763110710035</created>
      <option name="number" value="00006" />
      <option name="presentableId" value="LOCAL-00006" />
      <option name="project" value="LOCAL" />
      <updated>1763110710035</updated>
    </task>
    <task id="LOCAL-00007" summary="test: 第一批单元测试 - 状态机和校验器（12个测试）&#10;&#10;测试基础设施:&#10;- 创建测试目录结构（unit/integration/benchmark/util）&#10;- 实现 TestDataFactory 测试数据工厂&#10;  * 快速创建测试配置和网络端点&#10;  * 控制批量数量（最多10个）避免测试过慢&#10;- 实现 MockEventPublisher 事件发布器&#10;  * 支持事件记录和查询&#10;  * 提供类型安全的事件获取&#10;- 实现 TimingExtension 测试时间监控&#10;  * 自动记录每个测试执行时间&#10;  * 警告慢测试（&gt;60秒）&#10;&#10;P0 快速单元测试:&#10;- TaskStateMachineTest (8个测试)&#10;  * 合法和非法状态转移&#10;  * 状态转移历史记录&#10;  * 带失败信息的转移&#10;  * canTransition 验证&#10;  * 完整流程、暂停恢复、回滚流程&#10;- TenantIdValidatorTest (4个测试)&#10;  * null/过长/非法字符/合法场景&#10;&#10;Maven 配置优化:&#10;- 配置 Surefire 插件&#10;  * 4线程并行执行&#10;  * 排除 JMH 基准测试&#10;  * 60分钟超时保护&#10;- 配置 JaCoCo 代码覆盖率插件（目标75%）&#10;- 添加 benchmark profile 用于 JMH 测试&#10;&#10;测试结果:&#10;- 12个测试全部通过">
      <option name="closed" value="true" />
      <created>1763113776688</created>
      <option name="number" value="00007" />
      <option name="presentableId" value="LOCAL-00007" />
      <option name="project" value="LOCAL" />
      <updated>1763113776688</updated>
    </task>
    <task id="LOCAL-00008" summary="test: 第二批单元测试 - 网络端点和冲突校验器（7个测试）&#10;&#10;新增测试:&#10;- NetworkEndpointValidatorTest (4个测试)&#10;  * 网络端点列表为空校验&#10;  * IP地址格式错误检测（999.999.999.999）&#10;  * IP地址格式正确验证（192.168.1.1）&#10;  * 缺少源地址检测（无sourceIp和sourceDomain）&#10;  * 添加必需的key和target字段以匹配实际校验逻辑&#10;  &#10;- ConflictValidatorTest (3个测试)&#10;  * 检测租户冲突（租户已在其他任务中）&#10;  * 同批次内重复租户检测&#10;  * 无冲突场景验证&#10;  * 使用@BeforeEach/@AfterEach清理状态确保测试隔离&#10;&#10;测试改进:&#10;- 根据实际校验器实现调整测试断言&#10;- NetworkEndpoint需要key、source和target字段&#10;- 错误消息断言使用更灵活的匹配方式&#10;- ConflictValidator状态清理确保测试可重复&#10;&#10;测试结果:&#10;- 7个测试全部通过&#10;- 执行时间: 0.010秒&#10;- 累计19个测试，全部通过">
      <option name="closed" value="true" />
      <created>1763114311036</created>
      <option name="number" value="00008" />
      <option name="presentableId" value="LOCAL-00008" />
      <option name="project" value="LOCAL" />
      <updated>1763114311036</updated>
    </task>
    <task id="LOCAL-00009" summary="test: 第三批单元测试 - ValidationChain（4个测试）&#10;&#10;新增测试:&#10;- ValidationChainTest (4个测试)&#10;  * 按order顺序执行校验器&#10;    - 验证校验器按优先级顺序执行&#10;    - 所有校验器都正确执行&#10;  * 快速失败模式测试&#10;    - failFast=true时第一个错误后停止&#10;    - 避免执行后续校验器&#10;  * 非快速失败模式测试&#10;    - failFast=false时收集所有错误&#10;    - 验证多个校验器的错误都被收集&#10;  * 批量校验生成摘要&#10;    - 5个配置：2个有效，3个无效&#10;    - ValidationSummary正确统计各项指标&#10;    - 验证有效配置和无效配置分类&#10;  * 使用@BeforeEach清理ConflictValidator状态&#10;&#10;测试改进:&#10;- 修正TestDataFactory的createMinimalEndpoint&#10;  * 添加必需的key字段&#10;  * 添加必需的targetIp和targetDomain字段&#10;  * 确保所有最小化配置都能通过NetworkEndpointValidator&#10;- 修正ValidationSummary方法调用&#10;  * getTotalCount() -&gt; getTotalConfigs()&#10;  * 匹配实际API&#10;&#10;测试结果:&#10;- 4个测试全部通过&#10;- 执行时间: 0.003秒（远低于预期的120秒）&#10;- 累计23个测试，全部通过&#10;- TestDataFactory改进惠及所有使用它的测试">
      <option name="closed" value="true" />
      <created>1763114666463</created>
      <option name="number" value="00009" />
      <option name="presentableId" value="LOCAL-00009" />
      <option name="project" value="LOCAL" />
      <updated>1763114666463</updated>
    </task>
    <task id="LOCAL-00010" summary="test: 第四批单元测试 - 结果封装类（8个测试）&#10;&#10;新增测试:&#10;- ValidationResultTest (3个测试)&#10;  * 创建成功结果 - 验证isValid和无错误&#10;  * 添加错误后变为失败 - 动态状态变化&#10;  * 合并多个校验结果 - merge方法合并错误和警告&#10;  * 注意：merge是void方法，直接修改调用对象&#10;&#10;- StageResultTest (3个测试)&#10;  * 创建成功的Stage结果&#10;    - 验证success、stageName、status字段&#10;    - COMPLETED状态&#10;  * 创建失败的Stage结果  &#10;    - FAILED状态&#10;    - 包含FailureInfo&#10;  * 计算执行时长&#10;    - 使用LocalDateTime设置startTime和endTime&#10;    - Duration类型的时长计算&#10;    - 验证约1秒的时长&#10;&#10;- PipelineResultTest (2个测试)&#10;  * 创建成功的Pipeline结果&#10;    - 3个成功的Stage&#10;    - 无failedStage&#10;  * 创建包含失败Stage的结果&#10;    - 使用PipelineResult.failure工厂方法&#10;    - 验证failedStage（单数，不是复数）&#10;&#10;测试适配:&#10;- 适配LocalDateTime和Duration类型（不是long毫秒）&#10;- 适配ValidationResult.merge返回void&#10;- 适配PipelineResult.failedStage是单个对象&#10;- 所有测试都正确匹配实际API&#10;&#10;测试结果:&#10;- 8个测试全部通过&#10;- 执行时间: 0.020秒&#10;- 累计31个测试，全部通过&#10;- 总执行时间: 0.067秒">
      <option name="closed" value="true" />
      <created>1763115102603</created>
      <option name="number" value="00010" />
      <option name="presentableId" value="LOCAL-00010" />
      <option name="project" value="LOCAL" />
      <updated>1763115102603</updated>
    </task>
    <task id="LOCAL-00011" summary="test: 第五批单元测试 - PipelineContext/CheckpointManager/ExecutionUnit（13个测试）&#10;&#10;新增测试:&#10;- PipelineContextTest (5个测试)&#10;  * 存储和获取累积数据 - putData/getData&#10;  * 类型安全的数据获取 - getData(key, Class)&#10;  * 暂停标志控制 - requestPause/shouldPause/resume&#10;  * 恢复标志控制 - 暂停后恢复&#10;  * 取消标志控制 - requestCancel/shouldCancel&#10;  * 验证 Pipeline 上下文在 Stage 间传递数据&#10;&#10;- CheckpointManagerTest (4个测试)&#10;  * 保存和加载检查点&#10;    - 使用saveStageData保存Map数据&#10;    - 使用getStageData和hasStageData获取&#10;  * 加载不存在的检查点返回null&#10;  * 清除检查点 - clearCheckpoint&#10;  * 检查检查点是否存在 - hasCheckpoint&#10;  * InMemoryCheckpointManager实现&#10;&#10;- ExecutionUnitTest (4个测试)&#10;  * 创建执行单 - ID自动生成，状态CREATED&#10;  * 获取租户ID列表 - getTenantIds()&#10;  * 检查是否包含租户 - containsTenant()&#10;  * 状态标记 - markAsScheduled/Running/Completed&#10;  * 验证ExecutionUnitStatus状态转移&#10;&#10;测试适配:&#10;- 修正PipelineContext导入路径（execution.pipeline包）&#10;- 修正Checkpoint导入路径（execution.checkpoint包）&#10;- 适配Checkpoint使用saveStageData/getStageData而非putData/getData&#10;- 适配ExecutionUnit使用getExecutionMode()而非getMode()&#10;&#10;测试结果:&#10;- 13个测试全部通过&#10;- 执行时间: 0.040秒&#10;- 累计44个测试，全部通过&#10;- 总执行时间: 0.083秒">
      <option name="closed" value="true" />
      <created>1763115609300</created>
      <option name="number" value="00011" />
      <option name="presentableId" value="LOCAL-00011" />
      <option name="project" value="LOCAL" />
      <updated>1763115609300</updated>
    </task>
    <task id="LOCAL-00012" summary="删除 IDE 文件">
      <option name="closed" value="true" />
      <created>1763189533495</created>
      <option name="number" value="00012" />
      <option name="presentableId" value="LOCAL-00012" />
      <option name="project" value="LOCAL" />
      <updated>1763189533495</updated>
    </task>
    <task id="LOCAL-00013" summary="重构">
      <option name="closed" value="true" />
      <created>1763209927365</created>
      <option name="number" value="00013" />
      <option name="presentableId" value="LOCAL-00013" />
      <option name="project" value="LOCAL" />
      <updated>1763209927365</updated>
    </task>
    <task id="LOCAL-00014" summary="重构">
      <option name="closed" value="true" />
      <created>1763287538295</created>
      <option name="number" value="00014" />
      <option name="presentableId" value="LOCAL-00014" />
      <option name="project" value="LOCAL" />
      <updated>1763287538295</updated>
    </task>
    <task id="LOCAL-00015" summary="docs: 重构文档维护逻辑">
      <option name="closed" value="true" />
      <created>1763344062746</created>
      <option name="number" value="00015" />
      <option name="presentableId" value="LOCAL-00015" />
      <option name="project" value="LOCAL" />
      <updated>1763344062746</updated>
    </task>
    <option name="localTasksCounter" value="16" />
    <servers />
  </component>
  <component name="TypeScriptGeneratedFilesManager">
    <option name="version" value="3" />
  </component>
  <component name="Vcs.Log.Tabs.Properties">
    <option name="TAB_STATES">
      <map>
        <entry key="MAIN">
          <value>
            <State />
          </value>
        </entry>
      </map>
    </option>
  </component>
  <component name="VcsManagerConfiguration">
    <MESSAGE value="回退初始状态" />
    <MESSAGE value="feat: 完成 Phase 3 状态管理层&#10;&#10;- 创建 StateTransition 和 StateTransitionResult 状态转移记录和结果类&#10;- 实现 TaskStateMachine 状态机，定义完整的状态转移规则&#10;  * 支持 14 种任务状态的合法转移&#10;  * 提供状态转移历史记录&#10;  * 支持状态转移验证&#10;- 创建完整的事件体系（15 个事件类）&#10;  * TaskStatusEvent 事件基类&#10;  * 任务生命周期事件：Created, Validated, Started, Completed, Failed&#10;  * 校验相关事件：ValidationFailed&#10;  * 执行进度事件：Progress, StageCompleted, StageFailed&#10;  * 控制操作事件：Paused, Resumed&#10;  * 回滚相关事件：RollingBack, RollbackFailed, RolledBack&#10;- 实现 TaskStateManager 状态管理器&#10;  * 管理任务状态机的生命周期&#10;  * 集成 Spring ApplicationEventPublisher&#10;  * 在状态转移时自动发布对应事件&#10;  * 提供丰富的事件发布 API&#10;- 更新 TODO.md，标记 Phase 3 完成&#10;- 清理不必要的 IDE 配置文件&#10;&#10;所有状态转移受状态机保护，事件发布完整，编译通过。" />
    <MESSAGE value="feat: 完成 Phase 4 执行层 Pipeline 机制&#10;&#10;- 创建 PipelineContext 上下文类&#10;  * 支持租户配置和任务 ID 的传递&#10;  * 提供累积数据存储，支持 Stage 间数据传递&#10;  * 支持暂停和取消标志控制&#10;  * 类型安全的数据获取方法&#10;- 创建 PipelineStage 接口&#10;  * 定义 execute 和 rollback 方法&#10;  * 支持执行顺序控制（order）&#10;  * 支持跳过和回滚能力声明&#10;- 实现 Pipeline 管道类&#10;  * 按顺序执行多个 Stage&#10;  * 支持暂停、取消和跳过逻辑&#10;  * 集成检查点自动保存&#10;  * 支持从检查点恢复执行&#10;  * 支持逆序回滚已执行的 Stage&#10;  * 完整的异常处理和日志记录&#10;- 创建检查点管理机制&#10;  * CheckpointManager 接口定义&#10;  * InMemoryCheckpointManager 内存实现&#10;  * 支持检查点的保存、加载和清除&#10;- 实现 TenantTaskExecutor 租户任务执行器&#10;  * 集成 Pipeline 和状态管理&#10;  * 支持执行、暂停、恢复、回滚操作&#10;  * 支持重试（从头或从检查点）&#10;  * 自动发布任务状态事件&#10;  * 完整的生命周期管理&#10;- 更新 TODO.md，标记 Phase 4 完成" />
    <MESSAGE value="feat: 完成 Phase 5 服务通知层&#10;&#10;- 创建 NotificationResult 通知结果类&#10;  * 封装服务通知的执行结果&#10;  * 支持成功和失败两种状态&#10;  * 包含失败信息和响应数据&#10;- 创建 ServiceNotificationStrategy 策略接口&#10;  * 定义 notify 和 rollback 方法&#10;  * 支持配置验证&#10;  * 支持回滚能力声明&#10;- 实现 ServiceRegistry 服务注册中心&#10;  * 管理所有服务通知策略&#10;  * 支持策略的注册、查找和移除&#10;  * 线程安全（ConcurrentHashMap）&#10;- 实现 DirectRpcNotificationStrategy 直接 RPC 策略（Mock）&#10;  * 模拟直接通过 RPC 调用服务&#10;  * 支持配置验证&#10;  * 支持回滚操作&#10;  * 完整的日志记录&#10;- 实现 RedisRpcNotificationStrategy Redis+RPC 组合策略（Mock）&#10;  * 模拟先写 Redis 再通知服务的流程&#10;  * 两步操作：Redis 写入 + RPC 通知&#10;  * 支持完整回滚（删除 Redis + RPC 回滚）&#10;  * 包含配置序列化逻辑&#10;- 创建 ServiceNotificationAdapter 适配器基类&#10;  * 支持聚合多个子策略&#10;  * 顺序执行子策略&#10;  * 逆序回滚子策略&#10;  * 提供策略组合能力&#10;- 实现 ServiceNotificationStage Stage 适配&#10;  * 将 Strategy 适配为 PipelineStage&#10;  * 集成配置验证&#10;  * 集成通知执行和回滚&#10;  * 支持跳过逻辑&#10;  * 完整的异常处理&#10;- 更新 TODO.md，标记 Phase 5 完成" />
    <MESSAGE value="feat: 完成 Phase 6 编排层&#10;&#10;- 创建 ExecutionUnit 执行单类&#10;  * 封装一组租户任务的配置&#10;  * 支持 CONCURRENT 和 FIFO 两种执行模式&#10;  * 管理执行单的生命周期状态&#10;  * 提供租户查找和统计功能&#10;  * 状态标记方法（scheduled, running, completed, failed 等）&#10;- 实现 ExecutionUnitScheduler 调度器&#10;  * 配置线程池支持并发执行&#10;  * 实现并发执行模式（多个租户任务同时执行）&#10;  * 实现 FIFO 执行模式（租户任务依次执行）&#10;  * 集成 PipelineFactory 创建 Pipeline&#10;  * 集成 TaskStateManager 管理任务状态&#10;  * 完整的异常处理和结果收集&#10;  * 优雅关闭机制&#10;- 实现 TaskOrchestrator 任务编排器&#10;  * 管理所有执行单的生命周期&#10;  * 提交执行单并自动调度&#10;  * 租户冲突检测（同一租户不能重复执行）&#10;  * 支持按 tenantId 查找和控制任务&#10;  * 支持按 planId 查找和控制任务&#10;  * 实现暂停操作（pauseByTenant, pauseByPlan）&#10;  * 实现恢复操作（resumeByTenant, resumeByPlan）&#10;  * 实现回滚操作（rollbackByTenant, rollbackByPlan）&#10;  * 实现重试操作（retryByTenant, retryByPlan）&#10;  * 维护多种映射关系（租户-执行单、计划-执行单）&#10;  * 注册和管理租户任务执行器&#10;  * 清理已完成的执行单&#10;- 更新 TODO.md，标记 Phase 6 完成" />
    <MESSAGE value="feat: 完成 Phase 7 Facade 层和 Spring 配置 - 核心功能全部完成&#10;&#10;- 创建 DeploymentTaskFacade 对外接口&#10;  * 定义统一的蓝绿发布配置下发 API&#10;  * 支持按租户 ID 和计划 ID 两种粒度的操作&#10;  * 方法：createSwitchTask, pause, resume, rollback, retry, query, cancel&#10;- 实现 DeploymentTaskFacadeImpl 核心逻辑&#10;  * 集成 ValidationChain 进行前置校验&#10;  * 集成 TaskOrchestrator 管理任务生命周期&#10;  * 集成 TaskStateManager 发布状态事件&#10;  * 完整的任务创建流程：&#10;    1. 校验配置（ValidationChain）&#10;    2. 发布创建和校验事件&#10;    3. 按 planId 分组创建执行单&#10;    4. 提交到 TaskOrchestrator 调度执行&#10;  * 操作方法支持：&#10;    - pauseTaskByTenant / pauseTaskByPlan&#10;    - resumeTaskByTenant / resumeTaskByPlan&#10;    - rollbackTaskByTenant / rollbackTaskByPlan&#10;    - retryTaskByTenant / retryTaskByPlan（支持从检查点）&#10;  * 查询方法：queryTaskStatus, queryTaskStatusByTenant&#10;  * 完整的异常处理和结果封装&#10;- 创建 ExecutorConfiguration Spring 配置类&#10;  * 配置 CheckpointManager（InMemory 实现）&#10;  * 配置 TaskStateManager（集成 ApplicationEventPublisher）&#10;  * 配置 ServiceRegistry（预注册 4 个示例服务）&#10;  * 配置 PipelineFactory（动态创建 Pipeline 和 Stage）&#10;  * 配置 ExecutionUnitScheduler（线程池配置）&#10;  * 配置 TaskOrchestrator（任务编排）&#10;  * 配置 ValidationChain（4 个校验器）&#10;  * 配置 DeploymentTaskFacade（完整依赖注入）&#10;- 更新 TODO.md，标记核心功能全部完成" />
    <MESSAGE value="test: 第一批单元测试 - 状态机和校验器（12个测试）&#10;&#10;测试基础设施:&#10;- 创建测试目录结构（unit/integration/benchmark/util）&#10;- 实现 TestDataFactory 测试数据工厂&#10;  * 快速创建测试配置和网络端点&#10;  * 控制批量数量（最多10个）避免测试过慢&#10;- 实现 MockEventPublisher 事件发布器&#10;  * 支持事件记录和查询&#10;  * 提供类型安全的事件获取&#10;- 实现 TimingExtension 测试时间监控&#10;  * 自动记录每个测试执行时间&#10;  * 警告慢测试（&gt;60秒）&#10;&#10;P0 快速单元测试:&#10;- TaskStateMachineTest (8个测试)&#10;  * 合法和非法状态转移&#10;  * 状态转移历史记录&#10;  * 带失败信息的转移&#10;  * canTransition 验证&#10;  * 完整流程、暂停恢复、回滚流程&#10;- TenantIdValidatorTest (4个测试)&#10;  * null/过长/非法字符/合法场景&#10;&#10;Maven 配置优化:&#10;- 配置 Surefire 插件&#10;  * 4线程并行执行&#10;  * 排除 JMH 基准测试&#10;  * 60分钟超时保护&#10;- 配置 JaCoCo 代码覆盖率插件（目标75%）&#10;- 添加 benchmark profile 用于 JMH 测试&#10;&#10;测试结果:&#10;- 12个测试全部通过" />
    <MESSAGE value="test: 第二批单元测试 - 网络端点和冲突校验器（7个测试）&#10;&#10;新增测试:&#10;- NetworkEndpointValidatorTest (4个测试)&#10;  * 网络端点列表为空校验&#10;  * IP地址格式错误检测（999.999.999.999）&#10;  * IP地址格式正确验证（192.168.1.1）&#10;  * 缺少源地址检测（无sourceIp和sourceDomain）&#10;  * 添加必需的key和target字段以匹配实际校验逻辑&#10;  &#10;- ConflictValidatorTest (3个测试)&#10;  * 检测租户冲突（租户已在其他任务中）&#10;  * 同批次内重复租户检测&#10;  * 无冲突场景验证&#10;  * 使用@BeforeEach/@AfterEach清理状态确保测试隔离&#10;&#10;测试改进:&#10;- 根据实际校验器实现调整测试断言&#10;- NetworkEndpoint需要key、source和target字段&#10;- 错误消息断言使用更灵活的匹配方式&#10;- ConflictValidator状态清理确保测试可重复&#10;&#10;测试结果:&#10;- 7个测试全部通过&#10;- 执行时间: 0.010秒&#10;- 累计19个测试，全部通过" />
    <MESSAGE value="test: 第三批单元测试 - ValidationChain（4个测试）&#10;&#10;新增测试:&#10;- ValidationChainTest (4个测试)&#10;  * 按order顺序执行校验器&#10;    - 验证校验器按优先级顺序执行&#10;    - 所有校验器都正确执行&#10;  * 快速失败模式测试&#10;    - failFast=true时第一个错误后停止&#10;    - 避免执行后续校验器&#10;  * 非快速失败模式测试&#10;    - failFast=false时收集所有错误&#10;    - 验证多个校验器的错误都被收集&#10;  * 批量校验生成摘要&#10;    - 5个配置：2个有效，3个无效&#10;    - ValidationSummary正确统计各项指标&#10;    - 验证有效配置和无效配置分类&#10;  * 使用@BeforeEach清理ConflictValidator状态&#10;&#10;测试改进:&#10;- 修正TestDataFactory的createMinimalEndpoint&#10;  * 添加必需的key字段&#10;  * 添加必需的targetIp和targetDomain字段&#10;  * 确保所有最小化配置都能通过NetworkEndpointValidator&#10;- 修正ValidationSummary方法调用&#10;  * getTotalCount() -&gt; getTotalConfigs()&#10;  * 匹配实际API&#10;&#10;测试结果:&#10;- 4个测试全部通过&#10;- 执行时间: 0.003秒（远低于预期的120秒）&#10;- 累计23个测试，全部通过&#10;- TestDataFactory改进惠及所有使用它的测试" />
    <MESSAGE value="test: 第四批单元测试 - 结果封装类（8个测试）&#10;&#10;新增测试:&#10;- ValidationResultTest (3个测试)&#10;  * 创建成功结果 - 验证isValid和无错误&#10;  * 添加错误后变为失败 - 动态状态变化&#10;  * 合并多个校验结果 - merge方法合并错误和警告&#10;  * 注意：merge是void方法，直接修改调用对象&#10;&#10;- StageResultTest (3个测试)&#10;  * 创建成功的Stage结果&#10;    - 验证success、stageName、status字段&#10;    - COMPLETED状态&#10;  * 创建失败的Stage结果  &#10;    - FAILED状态&#10;    - 包含FailureInfo&#10;  * 计算执行时长&#10;    - 使用LocalDateTime设置startTime和endTime&#10;    - Duration类型的时长计算&#10;    - 验证约1秒的时长&#10;&#10;- PipelineResultTest (2个测试)&#10;  * 创建成功的Pipeline结果&#10;    - 3个成功的Stage&#10;    - 无failedStage&#10;  * 创建包含失败Stage的结果&#10;    - 使用PipelineResult.failure工厂方法&#10;    - 验证failedStage（单数，不是复数）&#10;&#10;测试适配:&#10;- 适配LocalDateTime和Duration类型（不是long毫秒）&#10;- 适配ValidationResult.merge返回void&#10;- 适配PipelineResult.failedStage是单个对象&#10;- 所有测试都正确匹配实际API&#10;&#10;测试结果:&#10;- 8个测试全部通过&#10;- 执行时间: 0.020秒&#10;- 累计31个测试，全部通过&#10;- 总执行时间: 0.067秒" />
    <MESSAGE value="test: 第五批单元测试 - PipelineContext/CheckpointManager/ExecutionUnit（13个测试）&#10;&#10;新增测试:&#10;- PipelineContextTest (5个测试)&#10;  * 存储和获取累积数据 - putData/getData&#10;  * 类型安全的数据获取 - getData(key, Class)&#10;  * 暂停标志控制 - requestPause/shouldPause/resume&#10;  * 恢复标志控制 - 暂停后恢复&#10;  * 取消标志控制 - requestCancel/shouldCancel&#10;  * 验证 Pipeline 上下文在 Stage 间传递数据&#10;&#10;- CheckpointManagerTest (4个测试)&#10;  * 保存和加载检查点&#10;    - 使用saveStageData保存Map数据&#10;    - 使用getStageData和hasStageData获取&#10;  * 加载不存在的检查点返回null&#10;  * 清除检查点 - clearCheckpoint&#10;  * 检查检查点是否存在 - hasCheckpoint&#10;  * InMemoryCheckpointManager实现&#10;&#10;- ExecutionUnitTest (4个测试)&#10;  * 创建执行单 - ID自动生成，状态CREATED&#10;  * 获取租户ID列表 - getTenantIds()&#10;  * 检查是否包含租户 - containsTenant()&#10;  * 状态标记 - markAsScheduled/Running/Completed&#10;  * 验证ExecutionUnitStatus状态转移&#10;&#10;测试适配:&#10;- 修正PipelineContext导入路径（execution.pipeline包）&#10;- 修正Checkpoint导入路径（execution.checkpoint包）&#10;- 适配Checkpoint使用saveStageData/getStageData而非putData/getData&#10;- 适配ExecutionUnit使用getExecutionMode()而非getMode()&#10;&#10;测试结果:&#10;- 13个测试全部通过&#10;- 执行时间: 0.040秒&#10;- 累计44个测试，全部通过&#10;- 总执行时间: 0.083秒" />
    <MESSAGE value="删除 IDE 文件" />
    <MESSAGE value="重构" />
    <MESSAGE value="docs: 重构文档维护逻辑" />
    <option name="LAST_COMMIT_MESSAGE" value="docs: 重构文档维护逻辑" />
  </component>
  <component name="github-copilot-workspace">
    <instructionFileLocations>
      <option value=".github/instructions" />
    </instructionFileLocations>
    <promptFileLocations>
      <option value=".github/prompts" />
    </promptFileLocations>
  </component>
</project>